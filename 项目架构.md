

------

```markdown
# 咖啡点餐管理系统（用户+管理员）项目架构与技术栈说明

## 项目概述
本项目是一个基于 **Flask + MySQL + Vue3 + Vite** 的咖啡点餐管理系统，前后端分离，支持 **用户（顾客）和管理员两种角色**。  

- **用户**：浏览菜单、下单、查看订单  
- **管理员**：管理菜单（增删改查）、管理订单、查看统计数据  

前端 UI 使用 **Element Plus + Animate.css**，提升视觉效果与交互体验。  

---

## 技术栈

| 层级 | 技术 | 说明 |
|------|------|------|
| 后端 | Flask | 提供 RESTful API |
| ORM | SQLAlchemy | 支持 ORM 与原生 SQL 查询 |
| 数据库 | MySQL | 存储用户、菜单、订单、日志等数据 |
| 前端 | Vue3 + Vite | SPA 应用，快速热更新与构建 |
| UI 框架 | Element Plus + Animate.css | 美观组件与动画效果 |
| HTTP 客户端 | Axios | 前端调用 Flask API |
| 状态管理 | Pinia（可选） | 管理购物车、登录信息等全局状态 |
| 路由 | Vue Router | 页面路由管理 |
| 构建工具 | Vite | 快速开发与构建 |
| 可选 | Docker | 统一部署环境 |

---

## 总体架构
```

+-------------------------+       HTTP/REST       +-------------------------+
 |        Frontend         | <------------------> |         Backend         |
 |  Vue3 + Vite + UI       |                       |  Flask + SQLAlchemy     |
 | - Views / Pages         |                       | - Routes / API          |
 |   - MenuPage            |                       | - Controllers           |
 |   - OrderPage           |                       | - Services / Logic      |
 |   - AdminPage           |                       | - Models (DB Tables)    |
 | - Components            |                       | - Utils (日志/异常处理) |
 |   - CoffeeCard          |                       | - Extensions            |
 |   - Cart               |                       +-------------------------+
 |   - OrderList           |
 | - API Service Layer     |
 | - State Management      |
 | - Router Configuration  |
 +-------------------------+
 |
 | ORM / SQL
 |
 +----------------+
 |     MySQL      |
 |  users / menu  |
 |  orders / logs |
 +----------------+

```
---

## 用户角色设计

| 角色 | 权限 |
|------|------|
| 用户 | 浏览菜单、加入购物车、提交订单、查看个人订单 |
| 管理员 | CRUD 菜单、管理所有订单、查看销售统计、管理用户 |

> 后端路由会根据角色返回不同权限的接口，前端界面显示不同菜单或功能按钮。  

---

## 后端模块划分（Flask）
```

backend/
 ├─ app.py                 # Flask 主入口
 ├─ config.py              # 配置文件（数据库 URI、调试模式、JWT 密钥）
 ├─ models/                # 数据库模型
 │   ├─ user.py            # 用户表（包含 role 字段）
 │   ├─ menu.py            # 菜单表
 │   ├─ order.py           # 订单表
 │   └─ order_items.py     # 订单明细
 ├─ routes/                # API 路由
 │   ├─ auth.py            # 登录、注册、权限验证
 │   ├─ user.py            # 用户接口（仅管理员可管理）
 │   ├─ menu.py            # 菜单接口（用户可查看，管理员可管理）
 │   └─ order.py           # 订单接口（用户管理个人订单，管理员管理所有订单）
 ├─ services/              # 业务逻辑层
 │   ├─ auth_service.py
 │   ├─ user_service.py
 │   ├─ menu_service.py
 │   └─ order_service.py
 ├─ utils/                 # 工具函数（日志、异常处理、权限装饰器）
 └─ extensions.py          # SQLAlchemy、CORS、JWT 初始化

```
**特点：**
- 用户身份区分通过 **role** 字段与 JWT Token  
- 权限控制在路由层或服务层进行  
- 服务层封装业务逻辑，路由只负责请求与返回  

---

## 前端模块划分（Vue3 + Vite）
```

frontend/
 ├─ src/
 │  ├─ main.js
 │  ├─ App.vue
 │  ├─ views/
 │  │   ├─ LoginPage.vue       # 登录页面
 │  │   ├─ MenuPage.vue        # 用户浏览菜单
 │  │   ├─ CartPage.vue        # 用户购物车
 │  │   ├─ OrderPage.vue       # 用户订单列表
 │  │   └─ AdminPage.vue       # 管理员页面（菜单 & 订单管理）
 │  ├─ components/
 │  │   ├─ CoffeeCard.vue      # 菜品卡片
 │  │   ├─ CartItem.vue        # 购物车项
 │  │   ├─ OrderList.vue       # 订单列表
 │  │   └─ UserList.vue        # 管理员用户列表
 │  ├─ api/
 │  │   ├─ auth.js
 │  │   ├─ user.js
 │  │   ├─ menu.js
 │  │   └─ order.js
 │  ├─ store/                  # Pinia 状态管理
 │  │   ├─ auth.js             # 登录状态
 │  │   └─ cart.js             # 购物车状态
 │  └─ router/                 # 页面路由（用户/管理员区分路由权限）
 ├─ public/
 └─ vite.config.js

```
**说明：**
- 根据角色显示不同路由和功能按钮  
- 登录后保存 JWT Token，在 Axios 请求头中带上  
- 管理员和用户界面通过路由守卫或条件渲染控制  

---

## 数据库设计示例

### 用户表 `users`
```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    role ENUM('admin','user') DEFAULT 'user',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 菜单表 `menu`

```sql
CREATE TABLE menu (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    image_url VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 订单表 `orders`

```sql
CREATE TABLE orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    total_price DECIMAL(10,2) NOT NULL,
    status ENUM('pending','completed','cancelled') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### 订单明细表 `order_items`

```sql
CREATE TABLE order_items (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT NOT NULL,
    menu_id INT NOT NULL,
    quantity INT NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(id),
    FOREIGN KEY (menu_id) REFERENCES menu(id)
);
```

------

## 数据流说明

1. **前端用户操作**：
   - 用户：浏览菜单 → 加入购物车 → 提交订单 → 查看个人订单
   - 管理员：登录 → 管理菜单、查看/更新订单、管理用户
2. **后端处理**：
   - Flask routes 接收请求 → 调用 service 执行业务逻辑 → SQLAlchemy 操作 MySQL
3. **数据库操作**：
   - 执行 CRUD / 查询 / 聚合 / 事务操作
4. **返回前端**：
   - Flask 返回 JSON → 前端界面更新 → Animate.css 动画展示

------

## Animate.css 集成

1. 安装：

```bash
npm install animate.css --save
```

1. 全局引入：

```javascript
import 'animate.css';
```

1. 页面组件中使用：

```html
<h1 class="animate__animated animate__fadeInDown">今日菜单</h1>
<el-button class="animate__animated animate__bounceIn">下单</el-button>
```

1. 可结合 Vue `<transition>` 动态展示弹窗或订单：

```vue
<transition name="animate__animated animate__fadeIn">
  <el-dialog v-if="dialogVisible">...</el-dialog>
</transition>
```

------

## UI 与动效建议

- 页面加载：`fadeIn` / `fadeInUp`
- 按钮操作：`bounceIn` / `pulse`
- 弹窗 / 表单：`zoomIn` / `fadeInDown`
- 页面切换：Vue Router + Animate.css 实现 `slide` / `fade`

------

## 扩展功能（可选）

- 分页、搜索、排序（菜单或订单表格）

- 用户权限管理（admin 管理菜单与订单）

- 统计分析（每日销售额、热门咖啡）

- 日志记录 / 操作历史

  

------

> 本架构支持前后端分离，角色权限清晰，结合 Animate.css 动画效果，可快速开发咖啡点餐系统，并具备可扩展性。

```

```